<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>MVC 3, EF 4.1 and some more… | Home of noocyte</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://blog.noocyte.net/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://blog.noocyte.net/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Home of noocyte &raquo; Feed" href="feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Home of noocyte &raquo; Comments Feed" href="comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Home of noocyte &raquo; MVC 3, EF 4.1 and some more… Comments Feed" href="2011/10/04/mvc-3-ef-4-1-and-some-more/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/blog.noocyte.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='twentythirteen-fonts-css'  href='http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%7CBitter%3A400%2C700&amp;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='wp-content/themes/twentythirteen/genericons/genericons.css@ver=3.03.css' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-style-css'  href='wp-content/themes/twentythirteen/style.css@ver=2013-07-18.css' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://blog.noocyte.net/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='wp-includes/js/jquery/jquery.js@ver=1.11.2'></script>
<script type='text/javascript' src='wp-includes/js/jquery/jquery-migrate.min.js@ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php@rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Great new utility discovered' href='index.html@p=344.html' />
<link rel='next' title='Howto use configurable rolenames to authorize attribute' href='index.html@p=372.html' />
<meta name="generator" content="WordPress 4.2.2" />
<link rel='canonical' href='index.html@p=347.html' />
<link rel='shortlink' href='index.html@p=347.html' />
<!-- Copy this script into your html file to enable Application Insights -->
<script type="text/javascript">
    window.appInsights={queue:[],applicationInsightsId:null,accountId:null,appUserId:null,configUrl:null,start:function(n){function u(n,t){n[t]=function(){var i=arguments;n.queue.push(function(){n[t].apply(n,i)})}}function f(n){var t=document.createElement("script");return t.type="text/javascript",t.src=n,t.async=!0,t}function r(){i.appendChild(f("//az416426.vo.msecnd.net/scripts/ai.0.js"))}var i,t;this.applicationInsightsId=n;u(this,"logEvent");u(this,"logPageView");i=document.getElementsByTagName("script")[0].parentNode;this.configUrl===null?r():(t=f(this.configUrl),t.onload=r,t.onerror=r,i.appendChild(t));this.start=function(){}}};

    appInsights.start("5e97fe9e-52e7-4eab-8869-5501ea0cdbe9");
    appInsights.logPageView();
</script>	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(wp-content/themes/twentythirteen/images/headers/circle.png) no-repeat scroll top;
			background-size: 1600px auto;
		}
		@media (max-width: 767px) {
			.site-header {
				background-size: 768px auto;
			}
		}
		@media (max-width: 359px) {
			.site-header {
				background-size: 360px auto;
			}
		}
		</style>
	</head>

<body class="single single-post postid-347 single-format-standard single-author">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="index.html" title="Home of noocyte" rel="home">
				<h1 class="site-title">Home of noocyte</h1>
				<h2 class="site-description">Ramblings of a mad mind</h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<button class="menu-toggle">Menu</button>
					<a class="screen-reader-text skip-link" href="index.html@p=347.html#content" title="Skip to content">Skip to content</a>
					<div class="nav-menu"><ul><li class="page_item page-item-302"><a href="index.html@p=302.html">About</a></li></ul></div>
					<form role="search" method="get" class="search-form" action="index.html">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
				
<article id="post-347" class="post-347 post type-post status-publish format-standard hentry category-work tag-generics tag-mvc">
	<header class="entry-header">
		
				<h1 class="entry-title">MVC 3, EF 4.1 and some more…</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="index.html@p=347.html" title="Permalink to MVC 3, EF 4.1 and some more…" rel="bookmark"><time class="entry-date" datetime="2011-10-04T09:33:00+00:00">October 4, 2011</time></a></span><span class="categories-links"><a href="category/english/work/index.html" rel="category tag">Geek</a></span><span class="tags-links"><a href="tag/generics/index.html" rel="tag">generics</a>, <a href="tag/mvc/index.html" rel="tag">mvc</a></span><span class="author vcard"><a class="url fn n" href="author/noocyte/index.html" title="View all posts by noocyte" rel="author">noocyte</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>So I’ve begun work on a new application, using ASP.Net MVC 3 (with Razor) and Entity Framework 4.1 (Code First). So far it looks like a good combo of technology, some head-aches and obstacles, but with the help of Google I’ve found my way through them all.</p>
<p>Earlier today I needed to do an “if check” before printing some data on a page, so I did something like this:</p>
<blockquote><p>@if(!String.IsNullOrEmpty(item.Compliant))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Html.DisplayFor(modelItem =&gt; item.Deadline, Model)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</blockquote>
<p>And then on the next line I did the exact same, but for a different property (ie. not “Deadline”). I felt a slight pain as I repeated myself (ie. the if test) and started to look at how to avoid that. I tried a number of different things, all documented below.</p>
<h3>1. Custom code to do check and return value</h3>
<p>My first attempt was to just take the code out of the view and put it in a static class. The code looked a little like this:</p>
<blockquote><p>public static string DisplayBasedOnCompliantStatus(SomeClass eval, string displayText)<br />{<br />&nbsp;&nbsp;&nbsp; if (!String.IsNullOrWhiteSpace(eval.Compliant) &amp;&amp; eval.Compliant.Equals(&#8220;Yes&#8221;, StringComparison.InvariantCultureIgnoreCase))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return displayText;</p>
<p>&nbsp;&nbsp;&nbsp; return String.Empty;<br />}</p>
</blockquote>
<p>This code worked as expected, but the return value was a string, so I lost the dataformatting of the input value (DateTime). So i figured there had to be a better way… </p>
<h3>2. Reuse of “DisplayFor” extension methods</h3>
<p>For my next attempt I tried to take as input whatever I needed to use to call the “Html.DisplayFor” method I used in the view code. One of my attempts looked a little like this:</p>
<blockquote><p>public static MvcHtmlString DisplayOnlyIfCompliant&lt;TValue&gt;(HtmlHelper&lt;TModel&gt; html, TModel model, Expression&lt;Func&lt;TModel, string&gt;&gt; compliantExpression, Expression&lt;Func&lt;TModel, TValue&gt;&gt; expression)<br />{<br />&nbsp;&nbsp;&nbsp; Func&lt;TModel, string&gt; deleg = compliantExpression.Compile();<br />&nbsp;&nbsp;&nbsp; var compliant = deleg(model);<br />&nbsp;&nbsp;&nbsp; if (!String.IsNullOrWhiteSpace(compliant) &amp;&amp; compliant.Equals(&#8220;Yes&#8221;, StringComparison.InvariantCultureIgnoreCase))<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return html.DisplayFor(expression);<br />&nbsp;&nbsp;&nbsp; }</p>
<p>&nbsp;&nbsp;&nbsp; return new MvcHtmlString(null);<br />}</p>
</blockquote>
<p>This I could never make work, not even compile, but I felt as if I was on the right track. </p>
<h3>3. Create another extension method</h3>
<p>For my third attempt I had a very close look at the orignal method (“Html.DisplayFor”) and suddenly realized that it was an extension method and I could probably create another extension method myself! So the third attempt looks like this:</p>
<blockquote><p>public static MvcHtmlString DisplayFor&lt;TModel, TValue&gt;(this HtmlHelper&lt;TModel&gt; html, Expression&lt;Func&lt;TModel, TValue&gt;&gt; expression, SomeClass model)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!String.IsNullOrWhiteSpace(model.Compliant) &amp;&amp; model.Compliant.Equals(&#8220;Yes&#8221;, StringComparison.InvariantCultureIgnoreCase))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return html.DisplayFor&lt;TModel, TValue&gt;(expression);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new MvcHtmlString(null);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</blockquote>
<p>And what-do-you-know? It works! To use it all I had to do was this:</p>
<blockquote><p>@Html.DisplayFor(modelItem =&gt; item.Deadline, Model)</p>
</blockquote>
<p>But when looking at the code I can see that it’s a little less flexible than it could have been. What if I need the same functionality for another property beside “Compliant”? Then I have to create another method, rename the original (it already has a bad name!) and then I’m back to repeating myself! So a fourth attempt should be tried!</p>
<h3>4. generic Extension method</h3>
<p>My final requirement is that the extension method can handle any model to check for null-string. This meant that I had to take the model specific code out of my extension method and add another parameter to be able to define the property to check for null-string. The code looks like this:</p>
<blockquote><p>&nbsp;&nbsp;&nbsp; public static MvcHtmlString DisplayFor&lt;TModel, TValue&gt;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this HtmlHelper&lt;TModel&gt; html, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, TValue&gt;&gt; expression, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, string&gt;&gt; compliantExpression,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TModel model)<br />&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var compliant = compliantExpression<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Compile()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Invoke(model);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!String.IsNullOrWhiteSpace(compliant) &amp;&amp; compliant.Equals(&#8220;Yes&#8221;, StringComparison.InvariantCultureIgnoreCase))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return html.DisplayFor&lt;TModel, TValue&gt;(expression);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new MvcHtmlString(null);<br />&nbsp;&nbsp;&nbsp; }<br />}</p>
</blockquote>
<p>And in use:</p>
<blockquote><p>@Html.DisplayFor(m =&gt; item.PropertyToDisplay, c =&gt; item.PropertyToCheck, Model)</p>
</blockquote>
<p>I guess it would be possible to do a more generic “null check”, so let’s make a fifth attempt… </p>
<h3>5. 100% Pure Generic Extension Method</h3>
<p>The final step in making the extension method 100% pure from any “non-generic noise” is to remove the “string” part in the “compliantExpression” input definition. There is really just one obstacle to make that happen; I need a generic null check. I tried using “IComparable” and requiring the input type to inherit from it, but this caused some issues when it was null (NullReferenceException). So I had to do a som Googling and found a <a href="http://stackoverflow.com/questions/65351/null-or-default-comparsion-of-generic-argument-in-c">great question</a> on <a href="http://stackoverflow.com/">Stackoverflow</a> that helped me out! Turns out I can write the method like this:</p>
<blockquote><p>public static MvcHtmlString DisplayFor&lt;TModel, TValue, TCheck&gt;(<br />this HtmlHelper&lt;TModel&gt; html,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, TValue&gt;&gt; expression,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, TCheck&gt;&gt; compliantExpression,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TModel model)</p>
<p>{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TCheck compliant = compliantExpression<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Compile()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Invoke(model);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!Equals(compliant, default(TCheck)))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return html.DisplayFor&lt;TModel, TValue&gt;(expression);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new MvcHtmlString(null);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />}</p>
</blockquote>
<p>And of course no need to adjust how we call the method, since types are inferred when using expressions (I guess?). </p>
<p>There is however a serious issue with the extension method now; I’ m only testing for “null”, not for an actual value compare, which of course I need… So, enter attempt number six.</p>
<h3>6. 100% Pure Generic Extenstion Method with compare function</h3>
<p>I had to make it possible to compare the actual value with a provided value, such as “Yes” or “1”. To do this I needed to add a parameter to the method enabling the caller to input a function to compare the value of “valueExpression” with a caller defined value. It now looks like this:</p>
<blockquote><p>public static MvcHtmlString DisplayForIfEqual&lt;TModel, TValue, TCheck&gt;(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this HtmlHelper&lt;TModel&gt; html,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, TValue&gt;&gt; valueExpression,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Expression&lt;Func&lt;TModel, TCheck&gt;&gt; checkExpression,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Func&lt;TCheck, bool&gt; compareFunction,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TModel model)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TCheck checkValue = checkExpression<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Compile()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .Invoke(model);</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!Equals(checkValue, default(TCheck)) &amp;&amp; compareFunction(checkValue))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return html.DisplayFor&lt;TModel, TValue&gt;(valueExpression);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return new MvcHtmlString(null);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>
</blockquote>
<p>To call it:</p>
<blockquote><p>@Html.DisplayForIfEqual(<br />m =&gt; item.SomeDisplayProperty, <br />c =&gt; item.SomeCheckProperty,<br />m =&gt; m.Equals(&#8220;No&#8221;, StringComparison.InvariantCultureIgnoreCase),<br />Model)</p>
</blockquote>
<p>A curiosity is that the “m” variable does not give you IntelliSense in Visual Studio today. I was puzzled by this, but no big deal really. </p>
<p>There might be some issues with the “Equals” method in the null-check (like boxing), but for now I’ll be using this method.</p>
	</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
					<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">

			<a href="index.html@p=344.html" rel="prev"><span class="meta-nav">&larr;</span> Great new utility discovered</a>			<a href="index.html@p=372.html" rel="next">Howto use configurable rolenames to authorize attribute <span class="meta-nav">&rarr;</span></a>
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
					
<div id="comments" class="comments-area">

			<h2 class="comments-title">
			One thought on &ldquo;<span>MVC 3, EF 4.1 and some more…</span>&rdquo;		</h2>

		<ol class="comment-list">
					<li id="comment-70" class="pingback even thread-even depth-1">
			<div class="comment-body">
				Pingback: <a href='http://noocyte.wordpress.com/2011/10/28/valueinjecter-and-expression-magic/' rel='external nofollow' class='url'>ValueInjecter and Expression Magic &laquo; Noocyte&#8217;s Weblog</a> 			</div>
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
		
	
							<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="index.html@p=347.html#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://blog.noocyte.net/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
																			<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-describedby="form-allowed-tags" aria-required="true" required="required"></textarea></p>						<p class="form-allowed-tags" id="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></p>
						<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='347' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="1846ec7173" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="65"/></p>					</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
				<div id="secondary" class="sidebar-container" role="complementary">
		<div class="widget-area">
			<aside id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="index.html">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
					<li>
				<a href="index.html@p=1672.html">Contributing to open source, part II</a>
						</li>
					<li>
				<a href="index.html@p=1602.html">Ninject and Factory Injection</a>
						</li>
					<li>
				<a href="index.html@p=1562.html">Contributing to open source, part I</a>
						</li>
					<li>
				<a href="index.html@p=1342.html">Transient Fault Handling Application Block</a>
						</li>
					<li>
				<a href="index.html@p=1252.html">Azure Workers</a>
						</li>
				</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='index.html@p=1672.html' rel='external nofollow' class='url'>Contributing to open source, part II | Home of noocyte</a></span> on <a href="index.html@p=1252.html#comment-75">Azure Workers</a></li><li class="recentcomments"><span class="comment-author-link"><a href='index.html@p=1672.html' rel='external nofollow' class='url'>Contributing to open source, part II | Home of noocyte</a></span> on <a href="index.html@p=1562.html#comment-76">Contributing to open source, part I</a></li><li class="recentcomments"><span class="comment-author-link"><a href='2012/11/my-first-adventures-in-git/index.html' rel='external nofollow' class='url'>My first adventures in Git | Home of noocyte</a></span> on <a href="index.html@p=167.html#comment-52">Double Key Dictionary</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://www.kcrunforlife.com/blog/2011/03/08/tune-in-to-see-Brad-Prestons-blog.aspx' rel='external nofollow' class='url'>new android apps</a></span> on <a href="index.html@p=167.html#comment-51">Double Key Dictionary</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://clickherenow' rel='external nofollow' class='url'>Lissa Lloyd</a></span> on <a href="index.html@p=167.html#comment-50">Double Key Dictionary</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
	<li><a href='2014/03/index.html'>March 2014</a></li>
	<li><a href='2014/02/index.html'>February 2014</a></li>
	<li><a href='2013/11/index.html'>November 2013</a></li>
	<li><a href='2013/01/index.html'>January 2013</a></li>
	<li><a href='2012/11/index.html'>November 2012</a></li>
	<li><a href='2012/10/index.html'>October 2012</a></li>
	<li><a href='2012/09/index.html'>September 2012</a></li>
	<li><a href='2012/08/index.html'>August 2012</a></li>
	<li><a href='2011/11/index.html'>November 2011</a></li>
	<li><a href='2011/10/index.html'>October 2011</a></li>
	<li><a href='2011/09/index.html'>September 2011</a></li>
	<li><a href='2009/10/index.html'>October 2009</a></li>
	<li><a href='2009/08/index.html'>August 2009</a></li>
	<li><a href='2008/11/index.html'>November 2008</a></li>
	<li><a href='2008/10/index.html'>October 2008</a></li>
	<li><a href='2008/09/index.html'>September 2008</a></li>
	<li><a href='2008/08/index.html'>August 2008</a></li>
	<li><a href='2008/07/index.html'>July 2008</a></li>
	<li><a href='2008/06/index.html'>June 2008</a></li>
	<li><a href='2008/05/index.html'>May 2008</a></li>
	<li><a href='2008/04/index.html'>April 2008</a></li>
	<li><a href='2008/03/index.html'>March 2008</a></li>
	<li><a href='2008/02/index.html'>February 2008</a></li>
	<li><a href='2008/01/index.html'>January 2008</a></li>
	<li><a href='2007/12/index.html'>December 2007</a></li>
	<li><a href='2007/11/index.html'>November 2007</a></li>
	<li><a href='2007/10/index.html'>October 2007</a></li>
		</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-3"><a href="category/english/work/index.html" >Geek</a>
</li>
	<li class="cat-item cat-item-4"><a href="category/english/link/index.html" >Link</a>
</li>
	<li class="cat-item cat-item-6"><a href="category/english/personal/index.html" >Personal</a>
</li>
	<li class="cat-item cat-item-7"><a href="category/uxrisk/index.html" >uxrisk</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="wp-login.php.html">Log in</a></li>
			<li><a href="feed/index.html">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="comments/feed/index.html">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
</aside>		</div><!-- .widget-area -->
	</div><!-- #secondary -->

			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type='text/javascript' src='wp-content/plugins/akismet/_inc/form.js@ver=3.0.4'></script>
<script type='text/javascript' src='wp-includes/js/comment-reply.min.js@ver=4.2.2'></script>
<script type='text/javascript' src='wp-includes/js/masonry.min.js@ver=3.1.2'></script>
<script type='text/javascript' src='wp-includes/js/jquery/jquery.masonry.min.js@ver=3.1.2'></script>
<script type='text/javascript' src='wp-content/themes/twentythirteen/js/functions.js@ver=2014-06-08'></script>
</body>
</html>